version: 2

jobs:
    build:
        working_directory: ~/ndelius-new-tech
        docker:
            - image: openjdk:8
        steps:
            - checkout
            - setup_remote_docker
            - run:
                name: Install node and sbt into build container
                command: |
                    apt-get update
                    curl -sL https://deb.nodesource.com/setup_6.x | bash -
                    apt-get install -y nodejs
                    curl -L https://www.npmjs.com/install.sh | sh
                    apt-get install apt-transport-https
                    apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 2EE0EA64E40A89B84B2DF73499E82A75642AC823
                    echo "deb https://dl.bintray.com/sbt/debian /" | tee -a /etc/apt/sources.list.d/sbt.list
                    apt-get update
                    apt-get install sbt
            - run:
                name: Run sbt build
                command: sbt assembly
