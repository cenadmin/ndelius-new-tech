!function(e){"use strict";var t=e.jQuery,i=e.GOVUK||{},s={_hasScrolled:!1,_scrollTimeout:!1,_hasResized:!1,_resizeTimeout:!1,getWindowDimensions:function(){return{height:t(e).height(),width:t(e).width()}},getWindowPositions:function(){return{scrollTop:t(e).scrollTop()}},getElementOffset:function(e){return e.offset()},init:function(){var o=t(".js-stick-at-top-when-scrolling");o.length>0&&(s.$els=o,!1===s._scrollTimeout&&(t(e).scroll(s.onScroll),s._scrollTimeout=e.setInterval(s.checkScroll,50)),!1===s._resizeTimeout&&(t(e).resize(s.onResize),s._resizeTimeout=e.setInterval(s.checkResize,50))),i.stopScrollingAtFooter&&o.each(function(s,o){var n=t(o).find("img");if(n.length>0){var l=new e.Image;l.onload=function(){i.stopScrollingAtFooter.addEl(t(o),t(o).outerHeight())},l.src=n.attr("src")}else i.stopScrollingAtFooter.addEl(t(o),t(o).outerHeight())})},onScroll:function(){s._hasScrolled=!0},onResize:function(){s._hasResized=!0},checkScroll:function(){if(!0===s._hasScrolled){s._hasScrolled=!1;var e=s.getWindowPositions().scrollTop,i=s.getWindowDimensions();s.$els.each(function(o,n){var l=t(n),c=l.data("scrolled-from");c&&e<c?s.release(l):i.width>768&&e>=s.getElementOffset(l).top&&s.stick(l)})}},checkResize:function(){if(!0===s._hasResized){s._hasResized=!1;var e=s.getWindowDimensions();s.$els.each(function(i,o){var n=t(o);if(n.hasClass("js-sticky-resize")){var l=t(".shim"),c=n.parent("div").width();l.css("width",c),n.css("width",c)}e.width<=768&&s.release(n)})}},stick:function(e){if(!e.hasClass("content-fixed")){e.data("scrolled-from",s.getElementOffset(e).top);var t=Math.max(e.height(),1),i=e.width();e.before('<div class="shim" style="width: '+i+"px; height: "+t+'px">&nbsp;</div>'),e.css("width",i+"px").addClass("content-fixed")}},release:function(e){e.hasClass("content-fixed")&&(e.data("scrolled-from",!1),e.removeClass("content-fixed").css("width",""),e.siblings(".shim").remove())}};i.stickAtTopWhenScrolling=s,e.GOVUK=i}(window);