@import data._
@import helper._

@(message: String, pdfBase64: String)

@main("Short Format Pre Sentence Report", false) {

  <div class="margin-top medium"></div>

  <div class="govuk-box-highlight">

    <h2 class="heading-xlarge">Report complete</h2>

    <p class="font-large">Your report has been created<br/>and uploaded successfully</p>

  </div>

  <p><a href="#">What did you think of this service?</a> (takes 30 seconds)</p>

  <input class="button" type="submit" value="Finished"/>

  <div class="iframe-container margin-top medium">
    <iframe></iframe>
  </div>

  <script type="text/javascript">
    $(function () {

      $('input').click(function () {
        parent.postMessage('@message', '*');
      });

      var pdfBytes = Uint8Array.from(atob('@pdfBase64'), function (c) { return c.charCodeAt(0); }),
        pdfBlob = new Blob([pdfBytes], {type: 'application/pdf'}),
        pdfUrl = URL.createObjectURL(pdfBlob);

      $('iframe').attr('src', pdfUrl);

    });
  </script>
}
